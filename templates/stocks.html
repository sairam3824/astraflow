<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stocks - AstraFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-200">
                <div class="font-semibold text-gray-900 mb-1">User</div>
                <div class="text-sm text-gray-500">Admin</div>
            </div>

            <!-- Main Navigation -->
            <nav class="p-4 space-y-1 border-b border-gray-200">
                <a href="/" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>🏠</span>
                    <span>Home</span>
                </a>
                <a href="/dashboard" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>📊</span>
                    <span>Dashboard</span>
                </a>
                <a href="/collections" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>📚</span>
                    <span>Collections</span>
                </a>
                <a href="/workspace" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>💼</span>
                    <span>Workspace</span>
                </a>
                <a href="/chat" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>💭</span>
                    <span>Chat</span>
                </a>
                <a href="/workflows" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm">
                    <span>⚙️</span>
                    <span>Workflows</span>
                </a>
                <a href="/stocks" class="flex items-center space-x-2 px-3 py-2 rounded-lg bg-purple-50 text-purple-600 text-sm">
                    <span>📈</span>
                    <span>Stocks</span>
                </a>
            </nav>

            <div class="flex-1"></div>

            <!-- Settings & Date -->
            <div class="p-4 border-t border-gray-200">
                <a href="/settings" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 text-sm mb-2 mb-2">
                    <span>⚙️</span>
                    <span>Settings</span>
                </a>
                <div class="text-xs text-gray-500 px-3" id="sidebarDate"></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gray-50">
            <div class="p-8">
                <!-- Header -->
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900 mb-1">Market Stream</h1>
                        <p class="text-sm text-gray-500">Real-time stock data from Kafka</p>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <select id="symbolSelect" class="px-4 py-2 bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm">
                            <option value="AAPL">AAPL - Apple Inc.</option>
                            <option value="GOOGL">GOOGL - Alphabet Inc.</option>
                            <option value="MSFT">MSFT - Microsoft Corp.</option>
                            <option value="TSLA">TSLA - Tesla Inc.</option>
                            <option value="AMZN">AMZN - Amazon.com Inc.</option>
                        </select>
                        
                        <span class="flex items-center text-sm text-green-600 bg-green-50 px-3 py-2 rounded-lg">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                            Live
                        </span>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
                    <!-- Main Chart -->
                    <div class="lg:col-span-3 bg-gray-900 rounded-xl shadow-lg border border-gray-800 overflow-hidden">
                        <!-- Chart Header -->
                        <div class="p-6 border-b border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h2 class="text-xl font-bold text-white" id="chartSymbol">AAPL</h2>
                                    <div class="flex items-center space-x-3 mt-2">
                                        <span class="text-3xl font-bold text-white" id="currentPrice">$178.23</span>
                                        <span class="text-sm font-medium" id="priceChange">+2.34 (+1.33%)</span>
                                    </div>
                                    <div class="text-xs text-gray-400 mt-1" id="lastUpdate">Last updated: --</div>
                                </div>
                                
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">1D</button>
                                    <button class="px-3 py-1.5 text-xs bg-blue-600 text-white rounded transition">5D</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">1M</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">6M</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">YTD</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">1Y</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">5Y</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-400 hover:bg-gray-800 rounded transition">Max</button>
                                </div>
                            </div>
                        </div>

                        <!-- Chart Canvas -->
                        <div class="p-6" style="height: 400px;">
                            <canvas id="priceChart"></canvas>
                        </div>

                        <!-- Stats Row -->
                        <div class="grid grid-cols-4 gap-4 p-6 border-t border-gray-800">
                            <div>
                                <div class="text-xs text-gray-400 mb-1">Open</div>
                                <div class="text-sm font-semibold text-white" id="openPrice">$178.54</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-400 mb-1">High</div>
                                <div class="text-sm font-semibold text-white" id="highPrice">$181.23</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-400 mb-1">Low</div>
                                <div class="text-sm font-semibold text-white" id="lowPrice">$176.45</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-400 mb-1">Volume</div>
                                <div class="text-sm font-semibold text-white" id="volumeValue">52.3M</div>
                            </div>
                        </div>
                    </div>

                    <!-- Side Panel -->
                    <div class="space-y-6">
                        <!-- Technical Indicators -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="font-semibold text-gray-900 mb-4">Technical Indicators</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-sm text-gray-600">RSI (14)</span>
                                        <span class="text-sm font-semibold text-gray-900" id="rsiValue">62.3</span>
                                    </div>
                                    <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                                        <div id="rsiBar" class="h-full bg-yellow-500 rounded-full transition-all" style="width: 62%"></div>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>Oversold</span>
                                        <span>Overbought</span>
                                    </div>
                                </div>

                                <div class="pt-4 border-t border-gray-200">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm text-gray-600">SMA (20)</span>
                                        <span class="text-sm font-semibold text-gray-900" id="smaValue">$178.45</span>
                                    </div>
                                </div>

                                <div>
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm text-gray-600">Volatility</span>
                                        <span class="text-sm font-semibold text-gray-900" id="volatilityValue">1.8%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Analysis -->
                        <div class="bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl shadow-sm p-6 text-white">
                            <h3 class="font-semibold mb-3 flex items-center">
                                <span class="mr-2">🤖</span>
                                AI Analysis
                            </h3>
                            <p class="text-sm opacity-90 leading-relaxed mb-4">Strong bullish momentum detected. RSI indicates healthy buying pressure. Consider entry points near support levels.</p>
                            <button class="w-full px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors">
                                Get Full Report
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Kafka Console -->
                <div class="bg-gray-900 rounded-xl shadow-lg border border-gray-800 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <span class="text-green-400 text-sm font-mono">●</span>
                            <h3 class="font-semibold text-white">Kafka Stream Console</h3>
                            <span class="text-xs text-gray-400 font-mono">market.ticks</span>
                        </div>
                        <button class="text-xs text-gray-400 hover:text-white transition" onclick="document.getElementById('kafkaLogs').innerHTML = ''">
                            Clear
                        </button>
                    </div>
                    
                    <div class="p-6 font-mono text-xs text-green-400 h-64 overflow-y-auto" id="kafkaLogs"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
                // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('token');
                window.location.href = '/login';
            }
        }

// Stock configuration
        const STOCKS = {
            'AAPL': { name: 'Apple Inc.', basePrice: 178.23, color: '#10b981' },
            'GOOGL': { name: 'Alphabet Inc.', basePrice: 142.50, color: '#3b82f6' },
            'MSFT': { name: 'Microsoft Corp.', basePrice: 378.91, color: '#8b5cf6' },
            'TSLA': { name: 'Tesla Inc.', basePrice: 242.84, color: '#ef4444' },
            'AMZN': { name: 'Amazon.com Inc.', basePrice: 151.94, color: '#f59e0b' }
        };

        // State management
        let currentSymbol = 'AAPL';
        let chartInstance = null;
        const MAX_DATA_POINTS = 100;
        const PRICE_RANGE = 8; // ±$8 from base price
        
        // Data storage for each stock
        const stockData = {};
        Object.keys(STOCKS).forEach(symbol => {
            stockData[symbol] = {
                prices: [],
                currentPrice: STOCKS[symbol].basePrice,
                openPrice: STOCKS[symbol].basePrice,
                highPrice: STOCKS[symbol].basePrice,
                lowPrice: STOCKS[symbol].basePrice
            };
        });

        // Initialize chart
        function initChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            // Generate initial data
            const now = Date.now();
            const initialData = [];
            const basePrice = STOCKS[currentSymbol].basePrice;
            
            for (let i = 0; i < MAX_DATA_POINTS; i++) {
                const timestamp = now - (MAX_DATA_POINTS - i) * 1000;
                const price = basePrice + (Math.random() - 0.5) * 4;
                initialData.push({ x: timestamp, y: price });
            }
            
            stockData[currentSymbol].prices = initialData;
            stockData[currentSymbol].currentPrice = initialData[initialData.length - 1].y;

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        data: initialData,
                        borderColor: STOCKS[currentSymbol].color,
                        backgroundColor: 'transparent',
                        borderWidth: 1.5,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            titleColor: '#9ca3af',
                            bodyColor: '#fff',
                            borderColor: '#374151',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return '$' + context.parsed.y.toFixed(2) + ' USD';
                                },
                                title: function(context) {
                                    const date = new Date(context[0].parsed.x);
                                    return date.toLocaleTimeString();
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'minute',
                                displayFormats: {
                                    minute: 'h:mm a'
                                }
                            },
                            grid: { 
                                display: false,
                                drawBorder: false
                            },
                            ticks: { 
                                color: '#6b7280',
                                maxTicksLimit: 8,
                                font: { size: 10 }
                            },
                            border: { display: false }
                        },
                        y: {
                            min: STOCKS[currentSymbol].basePrice - PRICE_RANGE,
                            max: STOCKS[currentSymbol].basePrice + PRICE_RANGE,
                            grid: { 
                                color: '#374151',
                                drawBorder: false,
                                lineWidth: 0.5
                            },
                            ticks: { 
                                color: '#6b7280',
                                count: 6,
                                font: { size: 10 },
                                callback: function(value) {
                                    return value.toFixed(0);
                                }
                            },
                            border: { display: false }
                        }
                    },
                    animation: { duration: 0 }
                }
            });
        }

        // Generate new price with mean reversion
        function generatePrice(symbol) {
            const stock = stockData[symbol];
            const basePrice = STOCKS[symbol].basePrice;
            const currentPrice = stock.currentPrice;
            
            // Mean reversion
            const deviation = currentPrice - basePrice;
            const meanReversionForce = -deviation * 0.08;
            
            // Random walk
            const randomChange = (Math.random() - 0.5) * 0.4;
            
            // Calculate new price
            let newPrice = currentPrice + meanReversionForce + randomChange;
            
            // Constrain to range
            const minPrice = basePrice - PRICE_RANGE;
            const maxPrice = basePrice + PRICE_RANGE;
            newPrice = Math.max(minPrice, Math.min(maxPrice, newPrice));
            
            // Update stock data
            stock.currentPrice = newPrice;
            stock.highPrice = Math.max(stock.highPrice, newPrice);
            stock.lowPrice = Math.min(stock.lowPrice, newPrice);
            
            // Add to prices array
            const timestamp = Date.now();
            stock.prices.push({ x: timestamp, y: newPrice });
            
            // Keep only last MAX_DATA_POINTS
            if (stock.prices.length > MAX_DATA_POINTS) {
                stock.prices.shift();
            }
            
            return newPrice;
        }

        // Update chart
        function updateChart() {
            const newPrice = generatePrice(currentSymbol);
            const stock = stockData[currentSymbol];
            
            // Update chart data
            chartInstance.data.datasets[0].data = [...stock.prices];
            chartInstance.update('none');
            
            // Update UI
            updatePriceDisplay();
        }

        // Update price display
        function updatePriceDisplay() {
            const stock = stockData[currentSymbol];
            const basePrice = STOCKS[currentSymbol].basePrice;
            const currentPrice = stock.currentPrice;
            const change = currentPrice - basePrice;
            const changePercent = (change / basePrice) * 100;
            
            document.getElementById('currentPrice').textContent = '$' + currentPrice.toFixed(2);
            document.getElementById('openPrice').textContent = '$' + stock.openPrice.toFixed(2);
            document.getElementById('highPrice').textContent = '$' + stock.highPrice.toFixed(2);
            document.getElementById('lowPrice').textContent = '$' + stock.lowPrice.toFixed(2);
            document.getElementById('lastUpdate').textContent = 'Last updated: ' + new Date().toLocaleTimeString();
            
            const priceChangeEl = document.getElementById('priceChange');
            const changeSign = change >= 0 ? '+' : '';
            priceChangeEl.textContent = `${changeSign}${change.toFixed(2)} (${changeSign}${changePercent.toFixed(2)}%)`;
            
            if (change >= 0) {
                priceChangeEl.className = 'text-sm font-medium text-green-400';
                chartInstance.data.datasets[0].borderColor = '#10b981';
            } else {
                priceChangeEl.className = 'text-sm font-medium text-red-400';
                chartInstance.data.datasets[0].borderColor = '#ef4444';
            }
        }

        // Switch symbol
        document.getElementById('symbolSelect').addEventListener('change', function(e) {
            currentSymbol = e.target.value;
            
            // Initialize data if needed
            if (stockData[currentSymbol].prices.length === 0) {
                const now = Date.now();
                const basePrice = STOCKS[currentSymbol].basePrice;
                
                for (let i = 0; i < MAX_DATA_POINTS; i++) {
                    const timestamp = now - (MAX_DATA_POINTS - i) * 1000;
                    const price = basePrice + (Math.random() - 0.5) * 4;
                    stockData[currentSymbol].prices.push({ x: timestamp, y: price });
                }
                
                stockData[currentSymbol].currentPrice = stockData[currentSymbol].prices[stockData[currentSymbol].prices.length - 1].y;
            }
            
            // Update chart
            document.getElementById('chartSymbol').textContent = currentSymbol;
            chartInstance.data.datasets[0].data = [...stockData[currentSymbol].prices];
            chartInstance.data.datasets[0].borderColor = STOCKS[currentSymbol].color;
            chartInstance.options.scales.y.min = STOCKS[currentSymbol].basePrice - PRICE_RANGE;
            chartInstance.options.scales.y.max = STOCKS[currentSymbol].basePrice + PRICE_RANGE;
            chartInstance.update();
            
            updatePriceDisplay();
        });

        // Update indicators
        function updateIndicators() {
            const rsi = Math.max(0, Math.min(100, parseFloat(document.getElementById('rsiValue').textContent) + (Math.random() - 0.5) * 5));
            document.getElementById('rsiValue').textContent = rsi.toFixed(1);
            document.getElementById('rsiBar').style.width = rsi + '%';
            
            const rsiBar = document.getElementById('rsiBar');
            if (rsi > 70) {
                rsiBar.className = 'h-full bg-red-500 rounded-full transition-all';
            } else if (rsi < 30) {
                rsiBar.className = 'h-full bg-green-500 rounded-full transition-all';
            } else {
                rsiBar.className = 'h-full bg-yellow-500 rounded-full transition-all';
            }
            
            const sma = stockData[currentSymbol].currentPrice * (1 + (Math.random() - 0.5) * 0.01);
            document.getElementById('smaValue').textContent = '$' + sma.toFixed(2);
            
            const volume = (Math.random() * 50 + 30).toFixed(1);
            document.getElementById('volumeValue').textContent = volume + 'M';
            
            const volatility = (Math.random() * 2 + 0.5).toFixed(1);
            document.getElementById('volatilityValue').textContent = volatility + '%';
        }

        // Kafka logs
        function addKafkaLog() {
            const kafkaLogs = document.getElementById('kafkaLogs');
            const symbols = Object.keys(STOCKS);
            const symbol = symbols[Math.floor(Math.random() * symbols.length)];
            const price = stockData[symbol].currentPrice.toFixed(2);
            const volume = Math.floor(Math.random() * 1000000) + 500000;
            const timestamp = new Date().toISOString().replace('T', ' ').substring(0, 19);
            
            const logEntry = document.createElement('div');
            logEntry.className = 'mb-2 hover:bg-gray-800 px-2 py-1 rounded transition';
            logEntry.innerHTML = `
                <span class="text-gray-500">[${timestamp}]</span>
                <span class="text-blue-400">TRADE</span>
                <span class="text-yellow-400">${symbol}</span>
                <span class="text-white">price:</span> <span class="text-green-400">$${price}</span>
                <span class="text-white">vol:</span> <span class="text-purple-400">${volume.toLocaleString()}</span>
            `;
            
            kafkaLogs.insertBefore(logEntry, kafkaLogs.firstChild);
            
            while (kafkaLogs.children.length > 20) {
                kafkaLogs.removeChild(kafkaLogs.lastChild);
            }
        }

        // Update all stocks in background
        function updateAllStocks() {
            Object.keys(STOCKS).forEach(symbol => {
                if (symbol !== currentSymbol) {
                    generatePrice(symbol);
                }
            });
        }

        // WebSocket connection for real-time data
        let ws = null;
        let useRealData = false;

        function connectWebSocket() {
            ws = new WebSocket('ws://localhost:8080/ws/stocks');
            
            ws.onopen = function() {
                console.log('WebSocket connected');
                useRealData = true;
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                handleRealTimeData(data);
            };
            
            ws.onerror = function(error) {
                console.error('WebSocket error:', error);
                useRealData = false;
            };
            
            ws.onclose = function() {
                console.log('WebSocket disconnected');
                useRealData = false;
                // Reconnect after 5 seconds
                setTimeout(connectWebSocket, 5000);
            };
        }

        function handleRealTimeData(data) {
            const symbol = data.symbol;
            const price = data.price;
            
            // Update stock data
            if (stockData[symbol]) {
                stockData[symbol].currentPrice = price;
                stockData[symbol].highPrice = Math.max(stockData[symbol].highPrice, price);
                stockData[symbol].lowPrice = Math.min(stockData[symbol].lowPrice, price);
                
                if (data.open) stockData[symbol].openPrice = data.open;
                
                // Add to prices array
                const timestamp = Date.now();
                stockData[symbol].prices.push({ x: timestamp, y: price });
                
                if (stockData[symbol].prices.length > MAX_DATA_POINTS) {
                    stockData[symbol].prices.shift();
                }
                
                // Update chart if this is the current symbol
                if (symbol === currentSymbol) {
                    chartInstance.data.datasets[0].data = [...stockData[symbol].prices];
                    chartInstance.update('none');
                    updatePriceDisplay();
                }
            }
            
            // Add to Kafka logs
            addKafkaLogFromData(data);
        }

        function addKafkaLogFromData(data) {
            const kafkaLogs = document.getElementById('kafkaLogs');
            const timestamp = new Date().toISOString().replace('T', ' ').substring(0, 19);
            
            const logEntry = document.createElement('div');
            logEntry.className = 'mb-2 hover:bg-gray-800 px-2 py-1 rounded transition';
            logEntry.innerHTML = `
                <span class="text-gray-500">[${timestamp}]</span>
                <span class="text-blue-400">TRADE</span>
                <span class="text-yellow-400">${data.symbol}</span>
                <span class="text-white">price:</span> <span class="text-green-400">$${data.price.toFixed(2)}</span>
                <span class="text-white">vol:</span> <span class="text-purple-400">${data.volume ? data.volume.toLocaleString() : 'N/A'}</span>
                ${data.source ? `<span class="text-gray-500">[${data.source}]</span>` : ''}
            `;
            
            kafkaLogs.insertBefore(logEntry, kafkaLogs.firstChild);
            
            while (kafkaLogs.children.length > 20) {
                kafkaLogs.removeChild(kafkaLogs.lastChild);
            }
        }

        // Start stock streaming
        async function startStockStream() {
            try {
                const response = await fetch('/api/stocks/start-stream', { method: 'POST' });
                const data = await response.json();
                console.log('Stock stream started:', data);
            } catch (error) {
                console.error('Error starting stock stream:', error);
            }
        }

        // Set current date
        const currentDate = new Date();
        const dateStr = currentDate.toLocaleDateString('en-US', { 
            weekday: 'short', 
            month: 'short', 
            day: 'numeric' 
        });
        document.getElementById('sidebarDate').textContent = dateStr;

        // Initialize
        initChart();
        updatePriceDisplay();

        // Try to connect WebSocket and start streaming
        connectWebSocket();
        startStockStream();

        // Fallback to simulated data if WebSocket not available
        setInterval(() => {
            if (!useRealData) {
                updateChart();
                updateAllStocks();
            }
        }, 1000);

        setInterval(updateIndicators, 3000);
        setInterval(() => {
            if (!useRealData) {
                addKafkaLog();
            }
        }, 1500);

        // Initial logs
        for (let i = 0; i < 5; i++) {
            addKafkaLog();
        }
    </script>
</body>
</html>
